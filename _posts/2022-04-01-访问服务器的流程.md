---
layout: post
title:  "访问服务器的流程"
date:   2022-04-01 00:00:01 +0800
---

输入一个网址后，到浏览器显示给你页面，期间发生了什么？

我们以`www.baidu.com`为例。

计算机网络是分层模型，所以这个过程也是分层来的，首先是在应用层发生了一些事情...

1. 应用层

   浏览器首先**解析url**，包括，用什么协议？http还是https？主机名是什么？访问的是什么目录或者什么文件？端口号是什么？

   输入`www.baidu.com`的时候，现在服务器通常采用https协议，主机名就是输入的url，不加目录就是根目录，默认端口号，https是443.

   然后https协议**生成请求报文**，然后交给传输层发送，但是现在还不知道服务器的ip。需要进行**DNS解析**，dns通过域名解析IP地址，有专门的dns服务器提供这个服务。

   域名解析完后浏览器一般都会缓存。

2. 传输层

   http协议的传输层协议采用的是**tcp**，tcp首先要进行握手连接，然后发送上层报文。当然，tcp需要更底层的协议支撑。

3. 网络层

   网络层ip协议提供端到端的传输能力，ip层加上了ip头，为报文提供了定位到某个ip地址的能力。

4. 链路层

   链路层提供点到点的传输能力，可以将报文传给相邻的设备。

然后报文到达目的主机后又一层一层解析报文，获得应用层的http请求报文，服务器再返回http的响应。

http响应回到主机后，浏览器会根据响应解析，渲染，显示给我们。